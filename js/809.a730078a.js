"use strict";(self["webpackChunkarbait_app"]=self["webpackChunkarbait_app"]||[]).push([[809],{8884:function(e,l,t){t.d(l,{A:function(){return d}});var o=t(641),r=t(33),a={class:"button-wrapper"},n=["disabled"],u=(0,o.pM)({__name:"VueButton",props:{title:{type:String,required:!0},color:{type:String,required:!0,validator:function(e){return["yellow","blue","green","red","black"].includes(e)}},disabled:{type:Boolean,default:!1}},emits:["click"],setup:function(e,l){l.emit;return function(l,t){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("button",{type:"button",class:(0,r.C4)(["button","button--".concat(e.color),{"button--disabled":e.disabled}]),disabled:e.disabled,onClick:t[0]||(t[0]=function(e){return l.$emit("click")})},(0,r.v_)(e.title),11,n)])}}});const i=u;var d=i},3809:function(e,l,t){t.d(l,{A:function(){return S}});var o=t(1635),r=t(641),a=t(953),n=t(33),u=t(9146),i=t(1353),d=t(4924),c=t(2110),s=t(8884),p=t(4932),m=t(4719),v=t(2318),b=t(7500);function f(e,l){var t=e.split("."),o=t[0],r=t[1],a=t[2];if(!o||!r||!a||2!==o.length||2!==r.length||4!==a.length){var n='Некорректный формат даты. Ожидается: дд.мм.ГГГГ (например, "12.05.2023")';throw b.A.error(n),new Error(n)}var u=l.split(":"),i=u[0],d=u[1];if(!i||!d||2!==i.length||2!==d.length){n='Некорректный формат времени. Ожидается: ЧЧ:мм (например, "15:20")';throw b.A.error(n),new Error(n)}var c="".concat(i,":").concat(d,":00"),s="".concat(a,"-").concat(r,"-").concat(o," ").concat(c),p=new Date(s);if(isNaN(p.getTime())){n='Некорректная дата: "'.concat(e,'" (например, "31.02.2023")');throw b.A.error(n),new Error(n)}return s}var k=f,h=t(4335),V=t(7360),_=function(e){return(0,o.sH)(void 0,void 0,void 0,(function(){var l,t,r;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,h.A.post("".concat(V.A,"/orders"),{model:e},{headers:{"Content-Type":"application/json"}})];case 1:return l=o.sent(),console.log("response.data",l.data),[3,3];case 2:return t=o.sent(),console.log(h.A.defaults.headers),r=t,console.error("Ошибка:",r.message),b.A.error("Ошибка ".concat(r.message)),[2,!1];case 3:return[2]}}))}))},w=_,y=t(5207),A=t(5008),L={class:"form-create-order"},g={class:"order-forms"},C={class:"order-item shadow-block order-item-container"},F={class:"order-item shadow-block order-item-container"},R={class:"order-item shadow-block order-item-container"},E={class:"order-item shadow-block order-item-checkbox order-item-container"},K={class:"order-item shadow-block order-item-container"},U={class:"order-item shadow-block order-item-container"},B={class:"order-item shadow-block order-item-container"},X={class:"order-item shadow-block order-item-container"},q={class:"order-item order-item-container"},M={class:"selection-template"},T={class:"selection-template__items"},j=["onClick"],N={class:"created-template"},x=(0,r.pM)({__name:"VueCreateOrderForm",setup:function(e){var l=this,t=(0,y.k)().userRoleInfo.userRole,f=(0,v.c)(),h=(0,a.KR)(!1),V=(0,a.KR)(!1),_=(0,a.KR)(""),x=(0,a.KR)(!1),H=(0,a.KR)(!1),I=(0,a.KR)(""),S=(0,a.KR)(""),$=(0,a.Kh)({date:"",address:"",price:"",worker_price:"",hourly_job:!0,description:"",pay_subtype_id:1,worker_total:""}),D=(0,r.EW)((function(){return!!(S&&$.address&&$.price&&$.worker_price&&$.hourly_job&&$.description&&$.pay_subtype_id&&$.worker_total&&I.value)})),O=(0,r.EW)((function(){return!D.value})),W=function(e){return(0,o.sH)(l,void 0,void 0,(function(){var l,r;return(0,o.YH)(this,(function(o){switch(o.label){case 0:return null===t?(A.A.push("/registration"),[2]):(x.value=!0,l=$,[4,k(S.value,I.value)]);case 1:return l.date=o.sent(),console.log("model",e),[4,w(e)];case 2:return r=o.sent(),console.log("response",r),[2]}}))}))},Y=function(){if(h.value=!h.value,_.value){H.value=!0;var e=G();f.createdTemplate(e),setTimeout((function(){H.value=!1,b.A.success("Сохранен как шаблон!")}),1e3)}else h.value=!0},G=function(){},J=function(e){};return function(e,l){var t=(0,r.gN)("staggered-from");return(0,r.uX)(),(0,r.CE)("div",L,[(0,r.bF)(u.A,null,{default:(0,r.k6)((function(){return[(0,r.bo)(((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("div",C,[l[12]||(l[12]=(0,r.Lk)("label",null,"На какое число заказ?",-1)),(0,r.bF)(c.A,{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=function(e){return S.value=e}),type:"date",placeholder:"ДД.ММ.ГГГГ"},null,8,["modelValue"])]),(0,r.Lk)("div",F,[l[13]||(l[13]=(0,r.Lk)("label",null,"На какое время заказ?",-1)),(0,r.bF)(c.A,{modelValue:I.value,"onUpdate:modelValue":l[1]||(l[1]=function(e){return I.value=e}),type:"time",placeholder:"12:15"},null,8,["modelValue"])]),(0,r.Lk)("div",R,[l[14]||(l[14]=(0,r.Lk)("label",null,"Адрес",-1)),(0,r.bF)(i.A,{modelValue:$.address,"onUpdate:modelValue":l[2]||(l[2]=function(e){return $.address=e}),placeholder:"ул. Пушкина д.123"},null,8,["modelValue"])]),(0,r.Lk)("div",E,[l[15]||(l[15]=(0,r.Lk)("label",null,"Оплата почасовая?",-1)),(0,r.bF)(m.A,{modelValue:$.hourly_job,"onUpdate:modelValue":l[3]||(l[3]=function(e){return $.hourly_job=e}),disabled:!0},null,8,["modelValue"])]),(0,r.Lk)("div",K,[l[16]||(l[16]=(0,r.Lk)("label",null,"Цена за заказ (руб)",-1)),(0,r.bF)(c.A,{modelValue:$.price,"onUpdate:modelValue":l[4]||(l[4]=function(e){return $.price=e}),placeholder:"3000"},null,8,["modelValue"])]),(0,r.Lk)("div",U,[l[17]||(l[17]=(0,r.Lk)("label",null,"Цена исполнителям (руб)",-1)),(0,r.bF)(c.A,{modelValue:$.worker_price,"onUpdate:modelValue":l[5]||(l[5]=function(e){return $.worker_price=e}),placeholder:"500"},null,8,["modelValue"])]),(0,r.Lk)("div",B,[l[18]||(l[18]=(0,r.Lk)("label",null,"Описание заказа",-1)),(0,r.bF)(d.A,{modelValue:$.description,"onUpdate:modelValue":l[6]||(l[6]=function(e){return $.description=e}),placeholder:"Что нужно сделать?"},null,8,["modelValue"])]),(0,r.Lk)("div",X,[l[19]||(l[19]=(0,r.Lk)("label",null,"Нужное кол-во человек",-1)),(0,r.bF)(c.A,{modelValue:$.worker_total,"onUpdate:modelValue":l[7]||(l[7]=function(e){return $.worker_total=e}),placeholder:"2"},null,8,["modelValue"])]),(0,r.Lk)("div",q,[(0,r.bF)(s.A,{title:"Создать",color:"yellow",onClick:l[8]||(l[8]=function(e){return W($)}),disabled:O.value},null,8,["disabled"])])])),[[t,{delay:.1,selector:".order-item",yOffset:20}]]),(0,r.bF)(p.A,{"is-visible":V.value,onCloseModal:l[9]||(l[9]=function(e){return V.value=e})},{default:(0,r.k6)((function(){return[(0,r.Lk)("div",M,[l[20]||(l[20]=(0,r.Lk)("div",{class:"selection-template__title h3"},[(0,r.Lk)("h3",null,"Использовать шаблон:")],-1)),(0,r.Lk)("div",T,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,a.R1)(f).templates,(function(e){return(0,r.uX)(),(0,r.CE)("div",{class:"selection-template__item",key:e.id,onClick:function(l){return J(e)}},[(0,r.Lk)("p",null,(0,n.v_)(e.name),1)],8,j)})),128))])])]})),_:1},8,["is-visible"]),(0,r.bF)(p.A,{"is-visible":h.value,onCloseModal:l[11]||(l[11]=function(e){return h.value=e})},{default:(0,r.k6)((function(){return[(0,r.Lk)("div",N,[(0,r.bF)(i.A,{modelValue:_.value,"onUpdate:modelValue":l[10]||(l[10]=function(e){return _.value=e}),placeholder:"Введите название шаблона"},null,8,["modelValue"]),(0,r.bF)(s.A,{title:"Сохранить",onClick:Y,color:"green"})])]})),_:1},8,["is-visible"])]})),_:1})])}}}),H=t(6262);const I=(0,H.A)(x,[["__scopeId","data-v-1a9b310f"]]);var S=I},4924:function(e,l,t){t.d(l,{A:function(){return c}});var o=t(641),r=t(3751),a=t(953),n=t(9946);const u=["placeholder","disabled"];var i={__name:"VueTextArea",props:{modelValue:{type:String,required:!0,default:""},isValid:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue","update:is-valid"],setup(e,{emit:l}){const t=l,i=e,d=(0,a.KR)(i.modelValue);return(0,o.wB)((()=>i.modelValue),(e=>{d.value=e})),(0,o.wB)(d,(e=>{t("update:modelValue",e),t("update:is-valid",e.trim().length>0)})),(0,o.sV)((()=>{t("update:is-valid",i.modelValue.trim().length>0)})),(l,t)=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),placeholder:e.placeholder,class:"textarea",disabled:i.disabled},null,8,u)),[[r.Jo,d.value],[(0,a.R1)(n.B)]])}};const d=i;var c=d},4932:function(e,l,t){t.d(l,{A:function(){return c}});var o=t(641),r=t(33),a=t(3751),n={class:"modal-body"},u=(0,o.pM)({__name:"VueModal",props:{width:{type:Number,default:90},height:{type:Number,default:50},isVisible:{type:Boolean,required:!0}},emits:["close-modal"],setup:function(e,l){var t=l.emit,u=e,i=t,d=function(){i("close-modal",!1)};return function(l,t){return e.isVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:d},[(0,o.Lk)("div",{class:"modal-content",style:(0,r.Tr)({width:u.width+"%",height:u.height+"%"}),onClick:t[0]||(t[0]=(0,a.D$)((function(){}),["stop"]))},[(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("button",{class:"close-button",type:"button",onClick:d}," × ")]),(0,o.Lk)("div",n,[(0,o.RG)(l.$slots,"default")])],4)])):(0,o.Q3)("",!0)}}}),i=t(6262);const d=(0,i.A)(u,[["__scopeId","data-v-507a5c65"]]);var c=d}}]);
//# sourceMappingURL=809.a730078a.js.map