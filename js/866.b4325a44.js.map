{"version":3,"file":"js/866.b4325a44.js","mappings":"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","sources":["webpack://arbait-app/./src/components/Buttons/VueYellowButton.vue?8bbb","webpack://arbait-app/./src/components/Buttons/VueYellowButton.vue","webpack://arbait-app/./src/components/Buttons/VueYellowButton.vue?17f8","webpack://arbait-app/./src/components/Timer/VueTimer.vue?eb86","webpack://arbait-app/./src/components/Timer/VueTimer.vue","webpack://arbait-app/./src/components/Timer/VueTimer.vue?42ce","webpack://arbait-app/./src/requests/post/sendAuthPhone.ts","webpack://arbait-app/./src/requests/post/sendVerificationCode.ts","webpack://arbait-app/./src/pages/RegistrationPage.vue?0655","webpack://arbait-app/./src/pages/RegistrationPage.vue","webpack://arbait-app/./src/pages/RegistrationPage.vue?c11f"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"button__yellow\" }\nconst _hoisted_2 = [\"disabled\"]\n\n\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'VueYellowButton',\n  props: {\n  title: String,\n  disabled: {\n    type: Boolean,\n    required: false,\n    default: false,\n  },\n},\n  setup(__props) {\n\nconst props = __props;\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"button__yellow--btn\",\n      disabled: props.disabled\n    }, _toDisplayString(props.title), 9, _hoisted_2)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"button__yellow\">\n    <button\n      type=\"button\"\n      class=\"button__yellow--btn\"\n      :disabled=\"props.disabled\"\n    >\n      {{ props.title }}\n    </button>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { defineProps } from \"vue\";\n\nconst props = defineProps({\n  title: String,\n  disabled: {\n    type: Boolean,\n    required: false,\n    default: false,\n  },\n});\n</script>\n<style lang=\"scss\">\n@import url(../../styles/variable.css);\n.button__yellow {\n  cursor: pointer;\n  width: 100%;\n  transition: all 0.3s ease;\n  &--btn {\n    font-family: \"sf-pro-200\";\n    cursor: pointer;\n    width: 100%;\n    border-radius: 15px;\n    background-color: var(--yellow);\n    color: var(--text-black);\n    font-size: 20px;\n    transition: all 0.2s ease;\n    padding: 8px 0px;\n    &:active {\n      scale: 1.05;\n      transition: all 0.2s ease;\n    }\n    &:disabled {\n      background-color: #ffdd2d80;\n      cursor: no-drop;\n      &:active {\n        scale: 1;\n      }\n    }\n  }\n}\n</style>\n","import script from \"./VueYellowButton.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./VueYellowButton.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./VueYellowButton.vue?vue&type=style&index=0&id=5bc20749&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"timer\" }\n\nimport { ref, computed, onMounted, onBeforeUnmount } from \"vue\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'VueTimer',\n  props: {\n  initialTime: {\n    type: Number,\n    required: true,\n  },\n},\n  emits: [\"timer-complete\"],\n  setup(__props, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst timeLeft = ref(props.initialTime);\nlet timerId: number | null = null;\n\nconst formattedTime = computed(() => {\n  const seconds = timeLeft.value % 60;\n  return `00:${seconds.toString().padStart(2, \"0\")}`;\n});\n\nconst startTimer = () => {\n  timerId = setInterval(() => {\n    timeLeft.value -= 1;\n    if (timeLeft.value <= 0) {\n      clearInterval(timerId!);\n      emit(\"timer-complete\");\n    }\n  }, 1000);\n};\n\nonMounted(startTimer);\n\nonBeforeUnmount(() => {\n  if (timerId) {\n    clearInterval(timerId);\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"p\", null, _toDisplayString(formattedTime.value), 1)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"timer\">\n    <p>{{ formattedTime }}</p>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onBeforeUnmount } from \"vue\";\n\nconst props = defineProps({\n  initialTime: {\n    type: Number,\n    required: true,\n  },\n});\n\nconst emit = defineEmits([\"timer-complete\"]);\n\nconst timeLeft = ref(props.initialTime);\nlet timerId: number | null = null;\n\nconst formattedTime = computed(() => {\n  const seconds = timeLeft.value % 60;\n  return `00:${seconds.toString().padStart(2, \"0\")}`;\n});\n\nconst startTimer = () => {\n  timerId = setInterval(() => {\n    timeLeft.value -= 1;\n    if (timeLeft.value <= 0) {\n      clearInterval(timerId!);\n      emit(\"timer-complete\");\n    }\n  }, 1000);\n};\n\nonMounted(startTimer);\n\nonBeforeUnmount(() => {\n  if (timerId) {\n    clearInterval(timerId);\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@import url(../../styles/variable.css);\n.timer {\n  color: var(--white);\n  min-width: 50px;\n  max-width: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import script from \"./VueTimer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./VueTimer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./VueTimer.vue?vue&type=style&index=0&id=3d0c5086&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import axios from \"axios\";\nimport api from \"@/api\";\nimport notification from \"@/notifications\";\nimport { AxiosError } from \"axios\";\n\nconst sendAuthPhone = async (phone: string) => {\n    try {\n      const response = await axios.post(\n        `${api}/login`,\n        { phone },\n        {\n        headers: {\n          // accept: \"*/*\",\n          \"Content-Type\": \"application/json\",          \n          // \"X-CSRF-TOKEN\": \"\",\n        },\n      })                  \n      return response.data;\n    } \n    catch(err) {\n      const error = err as AxiosError;\n      console.error(\"Ошибка:\", error.message);\n      notification.error(`Ошибка отправки номера: ${error.message}`);\n      return false;\n    };  \n}\n\nexport default sendAuthPhone;","import axios from \"axios\";\nimport { AxiosError } from \"axios\";\nimport api from \"@/api\";\nimport notification from \"@/notifications\";\n\nconst sendVerificationCode = async (phone: string, code: string, token: string, offer_accepted: number) => {\n    try {\n      const response = await axios.post(\n        `${api}/verification-code`,\n        { phone, code, token, offer_accepted},\n        {\n          headers: {\n            // accept: \"*/*\",\n            \"Content-Type\": \"application/json\",\n            // \"X-CSRF-TOKEN\": \"\",\n          },\n        }\n      )  \n      console.log('response2', response)    \n      return true;\n    }\n    catch(err) {\n      const error = err as AxiosError;\n      console.error(\"Ошибка:\", error.message);\n      notification.error(`Ошибка ${error.message}`);\n      return false;\n    }\n          \n}\n\nexport default sendVerificationCode;","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createBlock as _createBlock, createTextVNode as _createTextVNode, withCtx as _withCtx } from \"vue\"\n\nconst _hoisted_1 = { class: \"registration-page\" }\nconst _hoisted_2 = { class: \"form__user-phone\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"form__user-sms\"\n}\nconst _hoisted_4 = {\n  key: 1,\n  class: \"form__user-get\"\n}\nconst _hoisted_5 = {\n  key: 2,\n  class: \"form__user-send\"\n}\nconst _hoisted_6 = {\n  key: 3,\n  class: \"form__user-offer\"\n}\n\nimport { useRoute, useRouter } from \"vue-router\";\nimport { ref, watch, onMounted, computed } from \"vue\";\n//components\nimport VueNumberInput from \"@/components/Inputs/VueNumberInput.vue\";\nimport VueTextInput from \"@/components/Inputs/VueTextInput.vue\";\nimport VueForm from \"@/components/Forms/VueForm.vue\";\nimport VueCheckBox from \"@/components/CheckBoxs/VueCheckBox.vue\";\nimport VueYellowButton from \"@/components/Buttons/VueYellowButton.vue\";\nimport VueTimer from \"@/components/Timer/VueTimer.vue\";\nimport { useAuthStore } from \"@/store/auth\";\nimport notification from \"@/notifications\";\nimport sendAuthPhone from \"@/requests/post/sendAuthPhone\";\nimport sendVerificationCode from \"@/requests/post/sendVerificationCode\";\nimport axios from \"axios\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'RegistrationPage',\n  setup(__props) {\n\n// vue\nconst router = useRouter();\nconst route = useRoute();\n\nconst authStore = useAuthStore();\nconst authPhone = ref(null);\nconst isTimer = ref(false);\nconst authSms = ref(\"\");\nconst isValidAuthPhone = ref(false);\nconst isValidAuthSms = ref(false);\nconst isSendedSms = ref(false);\nconst isLoadingSmsCode = ref(false);\nconst isLoadingSendPhone = ref(false);\nconst isRedirect = ref(false);\n\nrouter.push({\n  query: {\n    ...route.query,\n    ch: String(false),\n  },\n});\n\nconst isOfferCheck = ref(false);\n\nwatch(\n  () => isOfferCheck.value,\n  (newVal) => {\n    router.push({\n      query: {\n        ...route.query,\n        ch: String(newVal),\n      },\n    });\n  }\n);\n\nconst hasOfferCheckbox = computed(() => {\n  return !isOfferCheck.value;\n});\n\nconst onSendCode = async () => {\n  isLoadingSmsCode.value = true;\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    const response = await sendVerificationCode(\n      authPhone.value!,\n      authSms.value,\n      token,\n      Number(isOfferCheck.value)\n    );\n    if (response) {\n      notification.success(\"Авторизация прошла успешно!\");\n\n      authStore.setAuthData(token, 0);\n\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n\n      isRedirect.value = true;\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 1000);\n    }\n  }\n  isLoadingSmsCode.value = false;\n};\n\nconst onSendPhone = async () => {\n  isLoadingSendPhone.value = true;\n  if (authPhone.value) {\n    const response = await sendAuthPhone(authPhone.value);\n    localStorage.setItem(\"token\", response.token);\n    isOfferCheck.value = Boolean(response.offer_accepted);\n    isLoadingSendPhone.value = false;\n  }\n  isTimer.value = true;\n  isSendedSms.value = true;\n};\n\nconst goToPage = (path: string) => {\n  router.push({\n    path: path,\n    query: {\n      ...route.query,\n      reg: \"true\",\n    },\n  });\n};\n\nonMounted(() => {\n  setTimeout(() => {\n    isOfferCheck.value = !!JSON.parse(route.query.ch);\n  }, 0);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _directive_loading = _resolveDirective(\"loading\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"registration-page__title\" }, [\n      _createElementVNode(\"h2\", null, \"Авторизация\")\n    ], -1)),\n    _createVNode(VueForm, { class: \"registration-page__form\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Номер телефона\", -1)),\n          _createVNode(VueNumberInput, {\n            modelValue: authPhone.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((authPhone).value = $event)),\n            placeholder: '+7(###)-###-##-##',\n            type: 'phone',\n            \"is-valid\": isValidAuthPhone.value,\n            \"onUpdate:isValid\": _cache[1] || (_cache[1] = ($event: any) => ((isValidAuthPhone).value = $event))\n          }, null, 8, [\"modelValue\", \"is-valid\"])\n        ]),\n        (isSendedSms.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n              _createVNode(VueTextInput, {\n                modelValue: authSms.value,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((authSms).value = $event)),\n                \"is-valid\": isValidAuthSms.value,\n                \"onUpdate:isValid\": _cache[3] || (_cache[3] = ($event: any) => ((isValidAuthSms).value = $event)),\n                maxlength: 4,\n                placeholder: '####'\n              }, null, 8, [\"modelValue\", \"is-valid\"])\n            ]))\n          : _createCommentVNode(\"\", true),\n        (isValidAuthPhone.value && !isValidAuthSms.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n              _withDirectives(_createVNode(VueYellowButton, {\n                title: 'Получить код',\n                onClick: onSendPhone,\n                disabled: isTimer.value\n              }, null, 8, [\"disabled\"]), [\n                [_directive_loading, isLoadingSendPhone.value]\n              ]),\n              (isTimer.value)\n                ? (_openBlock(), _createBlock(VueTimer, {\n                    key: 0,\n                    initialTime: 59,\n                    onTimerComplete: _cache[4] || (_cache[4] = ($event: any) => (isTimer.value = false))\n                  }))\n                : _createCommentVNode(\"\", true)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (isValidAuthSms.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n              _withDirectives(_createVNode(VueYellowButton, {\n                title: 'Отправить код',\n                onClick: onSendCode,\n                disabled: hasOfferCheckbox.value\n              }, null, 8, [\"disabled\"]), [\n                [_directive_loading, isLoadingSmsCode.value]\n              ])\n            ]))\n          : _createCommentVNode(\"\", true),\n        (isSendedSms.value)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n              _createElementVNode(\"p\", null, [\n                _cache[8] || (_cache[8] = _createTextVNode(\" Нажимая на кнопку \\\"Получить код\\\", вы соглашаетесь с условиями \")),\n                _createElementVNode(\"span\", {\n                  onClick: _cache[5] || (_cache[5] = ($event: any) => (goToPage('offer')))\n                }, \"оферты\"),\n                _cache[9] || (_cache[9] = _createTextVNode(\"! \"))\n              ]),\n              _createVNode(VueCheckBox, {\n                modelValue: isOfferCheck.value,\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((isOfferCheck).value = $event))\n              }, null, 8, [\"modelValue\"])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ])), [\n    [_directive_loading, isRedirect.value]\n  ])\n}\n}\n\n})","<template>\n  <div class=\"registration-page\" v-loading=\"isRedirect\">\n    <div class=\"registration-page__title\">\n      <h2>Авторизация</h2>\n    </div>\n\n    <vue-form class=\"registration-page__form\">\n      <div class=\"form__user-phone\">\n        <label>Номер телефона</label>\n        <vue-number-input\n          v-model=\"authPhone\"\n          :placeholder=\"'+7(###)-###-##-##'\"\n          :type=\"'phone'\"\n          v-model:is-valid=\"isValidAuthPhone\"\n        />\n      </div>\n      <div class=\"form__user-sms\" v-if=\"isSendedSms\">\n        <vue-text-input\n          v-model=\"authSms\"\n          v-model:is-valid=\"isValidAuthSms\"\n          :maxlength=\"4\"\n          :placeholder=\"'####'\"\n        />\n      </div>\n      <div class=\"form__user-get\" v-if=\"isValidAuthPhone && !isValidAuthSms\">\n        <vue-yellow-button\n          :title=\"'Получить код'\"\n          @click=\"onSendPhone\"\n          :disabled=\"isTimer\"\n          v-loading=\"isLoadingSendPhone\"\n        />\n        <vue-timer\n          :initialTime=\"59\"\n          v-if=\"isTimer\"\n          @timer-complete=\"isTimer = false\"\n        />\n      </div>\n      <div class=\"form__user-send\" v-if=\"isValidAuthSms\">\n        <vue-yellow-button\n          :title=\"'Отправить код'\"\n          @click=\"onSendCode\"\n          :disabled=\"hasOfferCheckbox\"\n          v-loading=\"isLoadingSmsCode\"\n        />\n      </div>\n      <div class=\"form__user-offer\" v-if=\"isSendedSms\">\n        <p>\n          Нажимая на кнопку \"Получить код\", вы соглашаетесь с условиями\n          <span @click=\"goToPage('offer')\">оферты</span>!\n        </p>\n        <vue-check-box v-model=\"isOfferCheck\" />\n      </div>\n    </vue-form>\n  </div>\n</template>\n<script lang=\"ts\" setup>\n// vue\nimport { useRoute, useRouter } from \"vue-router\";\nimport { ref, watch, onMounted, computed } from \"vue\";\n//components\nimport VueNumberInput from \"@/components/Inputs/VueNumberInput.vue\";\nimport VueTextInput from \"@/components/Inputs/VueTextInput.vue\";\nimport VueForm from \"@/components/Forms/VueForm.vue\";\nimport VueCheckBox from \"@/components/CheckBoxs/VueCheckBox.vue\";\nimport VueYellowButton from \"@/components/Buttons/VueYellowButton.vue\";\nimport VueTimer from \"@/components/Timer/VueTimer.vue\";\nimport { useAuthStore } from \"@/store/auth\";\nimport notification from \"@/notifications\";\nimport sendAuthPhone from \"@/requests/post/sendAuthPhone\";\nimport sendVerificationCode from \"@/requests/post/sendVerificationCode\";\nimport axios from \"axios\";\n\nconst router = useRouter();\nconst route = useRoute();\n\nconst authStore = useAuthStore();\nconst authPhone = ref(null);\nconst isTimer = ref(false);\nconst authSms = ref(\"\");\nconst isValidAuthPhone = ref(false);\nconst isValidAuthSms = ref(false);\nconst isSendedSms = ref(false);\nconst isLoadingSmsCode = ref(false);\nconst isLoadingSendPhone = ref(false);\nconst isRedirect = ref(false);\n\nrouter.push({\n  query: {\n    ...route.query,\n    ch: String(false),\n  },\n});\n\nconst isOfferCheck = ref(false);\n\nwatch(\n  () => isOfferCheck.value,\n  (newVal) => {\n    router.push({\n      query: {\n        ...route.query,\n        ch: String(newVal),\n      },\n    });\n  }\n);\n\nconst hasOfferCheckbox = computed(() => {\n  return !isOfferCheck.value;\n});\n\nconst onSendCode = async () => {\n  isLoadingSmsCode.value = true;\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    const response = await sendVerificationCode(\n      authPhone.value!,\n      authSms.value,\n      token,\n      Number(isOfferCheck.value)\n    );\n    if (response) {\n      notification.success(\"Авторизация прошла успешно!\");\n\n      authStore.setAuthData(token, 0);\n\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n\n      isRedirect.value = true;\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 1000);\n    }\n  }\n  isLoadingSmsCode.value = false;\n};\n\nconst onSendPhone = async () => {\n  isLoadingSendPhone.value = true;\n  if (authPhone.value) {\n    const response = await sendAuthPhone(authPhone.value);\n    localStorage.setItem(\"token\", response.token);\n    isOfferCheck.value = Boolean(response.offer_accepted);\n    isLoadingSendPhone.value = false;\n  }\n  isTimer.value = true;\n  isSendedSms.value = true;\n};\n\nconst goToPage = (path: string) => {\n  router.push({\n    path: path,\n    query: {\n      ...route.query,\n      reg: \"true\",\n    },\n  });\n};\n\nonMounted(() => {\n  setTimeout(() => {\n    isOfferCheck.value = !!JSON.parse(route.query.ch);\n  }, 0);\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@import url(../styles/variable.css);\n\nlabel {\n  margin-bottom: 2px;\n}\n\n.registration {\n  &-modal {\n    & p {\n      font-size: 17px;\n      font-family: \"sf-pro-300\";\n    }\n  }\n  &-page {\n    background: var(--yellow);\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    justify-content: center;\n    align-items: center;\n    padding: 20px 0px;\n    &__form {\n      box-shadow: 7px 7px 0px var(--shadow-dark-yellow);\n      animation: showForm 0.7s ease;\n      max-width: 500px;\n      margin: 0 auto;\n      display: flex;\n      gap: 5px;\n      background: var(--dark-gray);\n      padding: 20px;\n      border-radius: 15px;\n      width: calc(100% - 50px);\n      margin-bottom: 20px;\n      @keyframes showForm {\n        0% {\n          box-shadow: 0px 0px 0px var(--shadow-dark-yellow);\n        }\n        100% {\n          box-shadow: 7px 7px 0px var(--shadow-dark-yellow);\n        }\n      }\n    }\n    &__title {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n      max-width: 500px;\n      width: calc(100% - 50px);\n      h2 {\n        color: rgb(30, 30, 30);\n      }\n    }\n    &__widget {\n      width: calc(100% - 50px);\n      margin: 0 auto;\n      max-width: 500px;\n    }\n  }\n}\n\n.widget {\n  & span {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n  &__offer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n}\n\n.form {\n  &__user {\n    &-phone {\n      display: flex;\n      justify-content: start;\n      align-items: center;\n      flex-direction: column;\n      width: 100%;\n    }\n    &-get {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n      gap: 15%;\n    }\n    &-sms {\n      width: 100%;\n    }\n    &-send {\n      width: 100%;\n    }\n    &-offer {\n      display: flex;\n      justify-content: start;\n      width: 100%;\n      color: var(--white);\n      font-size: 12px;\n      margin-top: 10px;\n      text-align: start;\n      & span {\n        color: var(--yellow);\n        cursor: pointer;\n        text-decoration: underline;\n      }\n      & p {\n        margin-right: 5px;\n      }\n    }\n  }\n}\n</style>\n","import script from \"./RegistrationPage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./RegistrationPage.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./RegistrationPage.vue?vue&type=style&index=0&id=1513e186&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1513e186\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","__name","props","title","String","disabled","type","Boolean","required","default","setup","__props","_ctx","_cache","__exports__","initialTime","Number","emits","__emit","emit","timeLeft","timerId","formattedTime","seconds","value","toString","padStart","startTimer","setInterval","clearInterval","sendAuthPhone","phone","axios","post","api","headers","response","data","error","console","message","sendVerificationCode","code","token","offer_accepted","log","_hoisted_3","key","_hoisted_4","_hoisted_5","_hoisted_6","router","route","authStore","authPhone","isTimer","authSms","isValidAuthPhone","isValidAuthSms","isSendedSms","isLoadingSmsCode","isLoadingSendPhone","isRedirect","push","query","ch","isOfferCheck","newVal","hasOfferCheckbox","onSendCode","localStorage","getItem","success","setAuthData","defaults","common","setTimeout","window","location","href","onSendPhone","setItem","goToPage","path","reg","JSON","parse","_directive_loading","VueForm","VueNumberInput","modelValue","$event","placeholder","VueTextInput","maxlength","VueYellowButton","onClick","VueTimer","onTimerComplete","VueCheckBox","_"],"sourceRoot":""}